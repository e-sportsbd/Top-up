<!DOCTYPE html>  <html lang="en">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>Your Profile</title>  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">  <style>  
body{  
  margin:0;  
  background:#0a0a0a;  
  color:white;  
  font-family:'Poppins',sans-serif;  
}  
  
.container{  
  max-width:460px;  
  margin:auto;  
  padding:20px;  
}  
  
.card{  
  background:#151515;  
  padding:18px;  
  border-radius:12px;  
  margin-top:15px;  
  box-shadow:0 0 10px #000;  
}  
  
h2{  
  text-align:center;  
  margin-bottom:10px;  
}  
  
.user-img{  
  width:90px;  
  height:90px;  
  border-radius:50%;  
  display:block;  
  margin:auto;  
  margin-top:10px;  
}  
  
.info p{  
  font-size:15px;  
  margin:5px 0;  
}  
  
button{  
  width:100%;  
  padding:12px;  
  border:none;  
  border-radius:12px;  
  margin-top:10px;  
  font-size:16px;  
  background:#ff0055;  
  color:white;  
  cursor:pointer;  
}  
  
#popup{  
  position:fixed;  
  top:0; left:0;  
  width:100%; height:100%;  
  background:rgba(0,0,0,0.8);  
  display:none;  
  justify-content:center;  
  align-items:center;  
}  
  
.popup-box{  
  background:#151515;  
  padding:20px;  
  width:85%;  
  max-width:350px;  
  border-radius:12px;  
  text-align:center;  
}  
  
.popup-box input{  
  width:100%;  
  padding:12px;  
  background:#1f1f1f;  
  border:none;  
  border-radius:10px;  
  color:white;  
  margin-top:10px;  
}  
  
.popup-box button{  
  margin-top:12px;  
}  
</style>  </head>  
<body>  <div class="container">  <h2>Your Profile</h2>  <div class="card">  
  <img id="photo" class="user-img">  
  <div class="info">  
    <p><b>Name:</b> <span id="name"></span></p>  
    <p><b>Email:</b> <span id="email"></span></p>  
    <p><b>Phone:</b> <span id="phone"></span></p>  
    <p><b>Joined:</b> <span id="joined"></span></p>  
  </div>  
</div>  <div class="card">  
  <h3>ðŸ’° Wallet</h3>  
  <p><b>Available Balance:</b> <span id="balance">0</span> Tk</p>  
</div>  <button onclick="openPopup()">Change Password</button>
<button onclick="logout()">Logout</button>

</div>  <!-- CHANGE PASSWORD POPUP -->  <div id="popup">  
  <div class="popup-box">  
    <h3>Change Password</h3>  <input type="password" id="oldPass" placeholder="Current Password">  
<input type="password" id="newPass" placeholder="New Password">  

<button onclick="changePass()">Update</button>  
<button onclick="closePopup()" style="background:#333;">Cancel</button>

  </div>  
</div>  <!-- FIREBASE -->  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>  <script>  
// ---------------- Firebase Config ----------------  
const firebaseConfig = {  
  apiKey: "AIzaSyBl0PIm4lvZea96Bte3KaKQJvurGE1P8Es",  
  authDomain: "post-c7e41.firebaseapp.com",  
  projectId: "post-c7e41",  
  databaseURL: "https://post-c7e41-default-rtdb.firebaseio.com"  
};  
  
firebase.initializeApp(firebaseConfig);  
  
const auth = firebase.auth();  
const db = firebase.database();  
const fs = firebase.firestore();  
  
// ---------------- Load Profile ----------------  
auth.onAuthStateChanged(async user=>{  
  if(!user){  
    window.location.href = "login.html";  
    return;  
  }  
  
  let uid = user.uid;  
  
  document.getElementById("name").innerText = user.displayName || "User";  
  document.getElementById("email").innerText = user.email;  
  document.getElementById("photo").src = user.photoURL || "https://i.imgur.com/6VBx3io.png";  
  document.getElementById("joined").innerText = user.metadata.creationTime;  
  
  // PHONE LOAD  
  db.ref("users/" + uid).once("value").then(snap=>{  
      let data = snap.val();  
      document.getElementById("phone").innerText = data?.phone || "Not set";  
  });  
  
  // WALLET LOAD  
  db.ref("wallet/" + uid).on("value", snap=>{  
    let amount = snap.val()?.dollar || 0;  
    document.getElementById("balance").innerText = amount;  
  });  
  
});  
  
// ---------------- POPUP CONTROL ----------------  
function openPopup(){  
  document.getElementById("popup").style.display="flex";  
}  
function closePopup(){  
  document.getElementById("popup").style.display="none";  
}  
  
// ---------------- CHANGE PASSWORD ----------------  
function changePass(){  
  let user = auth.currentUser;  
  let oldPassword = document.getElementById("oldPass").value;  
  let newPassword = document.getElementById("newPass").value;  
  
  if(oldPassword=="" || newPassword==""){  
    alert("Fill both fields");  
    return;  
  }  
  
  // Re-authenticate user  
  let cred = firebase.auth.EmailAuthProvider.credential(user.email, oldPassword);  
  
  user.reauthenticateWithCredential(cred)  
  .then(()=>{  
      user.updatePassword(newPassword)  
      .then(()=>{  
          alert("Password changed successfully!");  
          closePopup();  
      })  
  })  
  .catch(err=>{  
      alert("Error: " + err.message);  
  });  
}  
  
  
// ---------------- LOGOUT ----------------  
function logout(){  
  auth.signOut().then(()=>{  
    window.location.href = "login.html";  
  });  
}  
  
</script>  </body>  
</html>